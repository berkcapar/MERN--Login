(this.webpackJsonploginsignup=this.webpackJsonploginsignup||[]).push([[0],{40:function(e,t,a){e.exports=a(69)},45:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),s=(a(45),a(5)),i=a(12),u=a(1),l=a.n(u),m=a(3),p=a(11),d=a.n(p),v=null,f={setToken:function(e){v="bearer ".concat(e)},searchmovies:function(){var e=Object(m.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:v},params:{keyword:t}},e.next=3,d.a.get("/api/movies",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addmovies:function(){var e=Object(m.a)(l.a.mark((function e(t){var a,n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.title,n=t.poster,r={headers:{Authorization:v},data:{title:a,poster:n}},e.next=4,d.a.post("/api/movies",r);case 4:return c=e.sent,e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=function(e){var t=e.movie,a=Object(n.useState)(!1),c=Object(i.a)(a,2),o=c[0],s=c[1],u=Object(n.useState)(!1),p=Object(i.a)(u,2),d=(p[0],p[1]),v=function(){var e=Object(m.a)(l.a.mark((function e(a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,f.addmovies({title:t.Title,poster:t.Poster});case 4:n=e.sent,d(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Try to add again!");case 11:return e.prev=11,s(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"moviecard"},r.a.createElement("h2",{className:"movietitle"},t.Title),r.a.createElement("img",{src:t.Poster}),r.a.createElement("button",{disabled:o,onClick:v,type:"submit"},o?"Adding":"Add to Your Collection!"))},b=function(){var e=Object(s.c)((function(e){return e.search}));return r.a.createElement("div",{className:"movielist"},e.map((function(e){return r.a.createElement(g,{movie:e})})))},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return function(a){a({type:"NOTIFICATION",message:e}),setTimeout((function(){a({type:"NOTIFICATION",message:null})}),1e3*t)}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFICATION":return t.message;default:return e}},w=function(e){return function(){var t=Object(m.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.searchmovies(e);case 3:if(n=t.sent,0!==(r=n.movies).length){t.next=7;break}return t.abrupt("return",a(E("Movie not found!")));case 7:a({type:"SEARCH",movies:r}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a(E("Movie not found!"));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH":return t.movies;default:return e}},O=function(){var e=Object(s.b)(),t=function(){var t=Object(m.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),n=a.target.keyword.value,e(w(n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",{className:"keywordinput"},r.a.createElement("h2",null,"Search the recent movies you have watched!"),r.a.createElement("input",{name:"keyword"})),r.a.createElement("button",{type:"submit"},"Search"))},y={login:function(){var e=Object(m.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={email:t,password:a},e.next=3,d.a.post("/api/login",n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},j=function(e,t){return function(){var a=Object(m.a)(l.a.mark((function a(n){var r;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.login(e,t);case 2:r=a.sent,n({type:"USER_LOGGED_IN",data:r});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGGED_IN":return t.data;case"USER_LOGGED_OUT":default:return e}},x=function(e){return e.loggedUser.name},S=function(e){var t=e.movies,a=Object(s.b)(),n=Object(s.c)(x);return r.a.createElement("div",null,r.a.createElement("div",{className:"userloggedlogout"},r.a.createElement("p",null,n," logged in"),r.a.createElement("button",{className:"logoutbutton",onClick:function(){a(function(){var e=Object(m.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("loggedUser"),t({type:"USER_LOGGED_OUT"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),window.location.href="/"}},"Log Out!")),r.a.createElement("div",{className:"welcomeuser"},r.a.createElement(O,null),r.a.createElement(b,{movies:t})))},I=function(){var e=Object(s.c)((function(e){return e.notification}));return e?r.a.createElement("div",{className:"error"},e):null},T=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],o=a[1],s={display:c?"none":""},u={display:c?"":"none"},l=function(){o(!c)};return r.a.createElement("div",{className:"toggles"},r.a.createElement("div",{style:s},r.a.createElement("button",{className:"joinbutton",onClick:l},e.buttonLabel)),r.a.createElement("div",{className:"signuptoggle",style:u},e.children,r.a.createElement("button",{className:"hidebutton",onClick:l},"cancel")))},U=a(2),C=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.loggedUser})),a=function(){var a=Object(m.a)(l.a.mark((function a(n){var r,c;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n.preventDefault(),r=n.target.email.value,c=n.target.password.value;try{e(j(r,c)),window.localStorage.setItem("loggedUser",JSON.stringify(t)),f.setToken(t.token)}catch(o){e(E("Wrong Credentials"))}case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);f.setToken(t.token)}}),[]),t?r.a.createElement(U.a,{to:"/search"}):r.a.createElement("div",{className:"loginarea"},r.a.createElement("h2",{className:"logintitle"},"Let me in!"),r.a.createElement("form",{className:"loginform",onSubmit:a},r.a.createElement("div",{className:"emailpassword"},r.a.createElement("div",{className:"emailtext"},"Email:",r.a.createElement("input",{className:"emailinput",name:"email"})),r.a.createElement("div",{className:"passwordtext"},"Password:",r.a.createElement("input",{className:"passwordinput",name:"password"}))),r.a.createElement("button",{className:"loginbutton",type:"submit"},"Log in!")))},G=a(39),A={signup:function(){var e=Object(m.a)(l.a.mark((function e(t,a,n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={name:t,email:a,password:n},e.next=3,d.a.post("/api/users",r);case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_UP":return[].concat(Object(G.a)(e),[t.data]);default:return e}},L=function(){var e=Object(s.b)();return r.a.createElement("div",{className:"signuparea"},r.a.createElement("h2",{className:"signup-title"},"Join Now! "),r.a.createElement("form",{className:"signupform",onSubmit:function(t){t.preventDefault();var a=t.target.name.value,n=t.target.email.value,r=t.target.password.value;r.length<3?e(E("Password should be longer than 3 charecters")):(e(function(e,t,a){return function(){var n=Object(m.a)(l.a.mark((function n(r){var c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,A.signup(e,t,a);case 2:c=n.sent,r({type:"SIGN_UP",data:c});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(a,n,r)),e(E("Succesfully joined")))}},r.a.createElement("div",{className:"signup-inputs"},r.a.createElement("div",{className:"signup-nametext"},"Name:",r.a.createElement("input",{className:"signup-nameinput",name:"name"})),r.a.createElement("div",{className:"signup-emailtext"},"Email:",r.a.createElement("input",{className:"signup-emailinput",name:"email"})),r.a.createElement("div",{className:"signup-passwordtext"},"Password:",r.a.createElement("input",{className:"signup-passwordinput",name:"password"}))),r.a.createElement("button",{className:"signup-button",type:"submit"},"Join!")))},D=function(){return r.a.createElement("div",{className:"welcomepage"},r.a.createElement("div",{className:"header"},r.a.createElement("h1",{className:"welcometitle"},"Movie App"),r.a.createElement("h2",{className:"welcometext"},"Gather your favourite movies at one place"),r.a.createElement("div",{className:"registercard"},r.a.createElement(I,null),r.a.createElement(C,null),r.a.createElement(T,{buttonLabel:"Join"},r.a.createElement(L,null)))),r.a.createElement("style",{jsx:!0},'\n        body {\n          background-image: url("/images/moviebg.jpeg");\n          background-repeat: no-repeat;\n          background-size: cover;\n          background-position: center center;\n          background-attachment: fixed;\n        }\n        .welcometitle {\n          display: flex;\n          justify-content: center;\n          width: 90%;\n          margin: 0 auto;\n        }\n      '))},J=a(15),M=function(){return r.a.createElement(J.a,null,r.a.createElement("div",{className:"navigation"},r.a.createElement(J.b,{to:"/"},"Home"),r.a.createElement(J.b,{to:"/search"},"Search Movie!"),r.a.createElement(J.b,{to:"/mycollection"},"My Collection")),r.a.createElement(U.d,null,r.a.createElement(U.b,null,r.a.createElement(U.b,{path:"/search"},r.a.createElement(S,null)),r.a.createElement(U.b,{path:"/mycollection"},r.a.createElement("div",null,"My Collection Component ")),r.a.createElement(U.b,{path:"/",exact:!0},r.a.createElement(D,null)))))},P=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=(t[0],t[1]);return Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);a(t),f.setToken(t.token)}}),[]),r.a.createElement(M,null)},R=a(10),z=a(37),F=a(38),H=Object(R.combineReducers)({loggedUser:k,notification:h,newUser:_,search:N}),W=Object(R.createStore)(H,Object(z.composeWithDevTools)(Object(R.applyMiddleware)(F.a)));o.a.render(r.a.createElement(s.a,{store:W},r.a.createElement(P,null)),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.a08baa30.chunk.js.map